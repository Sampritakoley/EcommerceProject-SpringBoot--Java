<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/base::layout(~{::section})}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<section>
    <div class="card-book" style="margin:60px">
    <ul class="row feature-list feature-list-sm">
        <div th:each="orderitem, iterStat : ${orderItemList}" class="card" style="width: 20%;height:60%;color:black;margin-top:50px;">
                    <div class="card-body"  style="width: 100%; height:100%; border:1px solid black ; margin:6px;color:black;background-color: rgb(41 39 35);">
                        <img src="..." th:src="@{'/image/'+${orderitem.image}}" class="profile-pic" style="margin-left:20px;"  alt="Profile image">
                        <h5 class="card-title" th:text="${'Order/#'+orderitem.name}" style="color:white;margin-left:20px;"></h5>
                    </div>
        </div>
    </ul>
        <div class="row align-items-center" style="height:300px;">
            <div class="col" style="width:100%;height:500px;">
              <h2 style="color:white; margin-left:10px;">Price Details</h2>
                  <table  style="color:white;width:60%;margin-left:10px;">
        <thead>

        </thead>
        <tbody th:each="orderitem : ${orderItemList}">
        <tr>
            <td th:text="${orderitem.name+' ✘ '+orderitem.totalQuantity}" style="width: 150px;"></td>
            <td th:text="${'₹'+orderitem.priceToPay}"></td>
        </tr>
        </tbody>
    </table>
                  <h2 style="color:white;font-weight:20px;">---------------------------------</h2>
                  <span style="display:inline-block; width:140px;color:white;margin:10px;" th:text="'Subtotal'"></span>
                  <span th:text="${order.totalPrice}" style="width:100px;color:white;"></span>
            </div>
            <div class="col" style="width:50%;height:500px;">
                <h2 style="color:white;">Billing Address</h2>
                <span th:text="${billingAddress.address_line +', '+ billingAddress.street +', '+ billingAddress.city+', '+ billingAddress.zip+' | '+ billingAddress.state}" style="display:block;font-size:25px;color:white;"></span>
                <span th:text="${user.first_name +' '+ user.last_name+' | '+user.email}" style="font-size:25px;color:white;"></span>
            </div>
            <div class="col"  style="width:50%;height:500px;">
                <h2 style="color:white;" th:if="${order.deliveryDate!=null}" th:text="${'Delivery Date: '+order.deliveryDate}"></h2>
                <div class="form-group" style="margin:30px;">

                    <div class="Click-here-delivery">Add Delivery Date</div>

                    <div class="custom-model-main-delivery">
                        <div class="custom-model-inner-delivery">
                            <div class="close-btn-delivery">×</div>
                            <div class="custom-model-wrap-delivery">
                                <h2>Add Delivery Date</h2>
                                <div class="pop-up-content-wrap-delivery">
                                    <div id="innerFormContent1">


                                        <label for="deliveryDate">Select Delivery Date:</label>
                                        <input type="date" id="deliveryDate" name="deliveryDate" required min="1900-01-01" max="2023-12-31">



                                        <span class="order-id" style="display: none;" th:text="${order.id}"></span>
                                        <span class="order-tracking-id" style="display: none;" th:text="${order.orderTrackingId}"></span>

                                        <button type="button" onclick="addDeliveryDate(this)" id="submitInnerForm1">Add Delivery Date</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-overlay"></div>
                    </div>

                </div>

            </div>
        </div>
        <div th:if="${order.status!=Pending}" id = "delivery-detail" class="card-delivery">
                    <div class="row">
                        <div class="col-md-12 col-lg-12" >
                            <div id="tracking-pre"></div>
                            <div id="tracking">
                                <div class="tracking-list" th:each="shippment, iterStat  : ${ShippmentList}">
                                    <div class="tracking-item">
                                        <div class="tracking-icon status-intransit">
                                            <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                                <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                                            </svg>
                                        </div>
                                        <div class="tracking-date"><img src="https://raw.githubusercontent.com/shajo/portfolio/a02c5579c3ebe185bb1fc085909c582bf5fad802/delivery.svg" class="img-responsive" alt="order-placed" /></div>
                                        <div class="tracking-content" th:text="${shippment.status  + ' | '+shippment.date}" style="display:block;color:white;font-size:25px;">
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
        </div>
    </div>
    <div class="form-group" style="margin:30px;">
        <!--............-->
        <div class="Click-here">Process</div>

        <div class="custom-model-main">
            <div class="custom-model-inner">
                <div class="close-btn">×</div>
                <div class="custom-model-wrap">
                    <h2>Process The Order</h2>
                    <div class="pop-up-content-wrap">
                        <div id="innerFormContent">

                            <input type="hidden" id="cid" name="cid" />
                            <!--select warehouse-->
                            <label for="warehouse">Select Warehouse</label>
                            <select id="warehouse" name="warehouse">
                                <option value="" disabled selected>Select a Warehouse</option> <!-- Default option -->
                                <option th:each="warehouse : ${Warehouses}" th:value="${warehouse.id}" th:text="${warehouse.city}"></option>
                            </select>
                            <!--select status-->
                            <label for="status">Update Status</label>
                            <select id="status" name="status">
                                <option th:if="${LastShippment==null}" value="confirm">Confirm</option>
                                <option th:if="${LastShippment!=null && LastShippment.status=='confirm'}" value="shipped">Shipped</option>
                                <option th:if="${LastShippment!=null && LastShippment.status=='shipped'}" value="out for delivery">Out for Delivery</option>
                                <option th:if="${LastShippment!=null && LastShippment.status=='out for delivery'}" value="delivered">Delivered</option>
                            </select>

                            <span class="order-id" style="display: none;" th:text="${order.id}"></span>
                            <span class="order-tracking-id" style="display: none;" th:text="${order.orderTrackingId}"></span>
                            <!-- Button to Submit Inner Form -->
                            <button type="button" onclick="ProcessOrder(this)" id="submitInnerForm">Process</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-overlay"></div>
        </div>
        <!--<a href="#" th:href="@{'/category/'+${cid}+'/brand'}" class="btn btn-secondary" style="margin-top: 10px; display: inline-block;"><i class="fas fa-eye" style="margin-right: 5px;"></i></a>-->
    </div>
    </div>
</section>
</body>
</html>